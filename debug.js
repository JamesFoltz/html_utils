!function(){function e(){let e=document.createElement("div");e.id="debug-overlay",e.style.cssText=`position:fixed; bottom:0; left:0; right:0;max-height:250px; overflow-y:auto;background:rgba(0,0,0,0.85); color:#fff;font-family:monospace; font-size:13px;padding:8px; border-top:2px solid #444;z-index:9999; box-shadow:0 -2px 8px rgba(0,0,0,0.5);`,document.body.appendChild(e);let t=document.createElement("div");t.style.cssText=`display:flex; justify-content:space-between;align-items:center; margin-bottom:6px;font-weight:bold;`,t.innerHTML=`<span>Debug Console</span><div><button id="debug-clear" style="margin-right:5px;">Clear</button><button id="debug-toggle">Collapse</button></div>`,e.appendChild(t);let n=document.createElement("div");function o(t,o,r=!1){let i=document.createElement("div"),a=new Date().toLocaleTimeString(),l="#fff";"error"===t?l="#ff6b6b":"warn"===t?l="#ffd166":"info"===t&&(l="#6ec6ff");let d="";if(r&&o[0]instanceof Event){let s=o[0];d=s instanceof ErrorEvent?`[${s.message}] at ${s.filename}:${s.lineno}:${s.colno}`:s instanceof PromiseRejectionEvent?`[Promise Rejection] ${s.reason?s.reason.toString():""}`:s.target&&(s.target.src||s.target.href)?`Resource load error: ${s.target.src||s.target.href}`:s.type}else d=o.map(String).join(" ");for(i.innerHTML=`<span style="color:#888;">[${a}]</span> <span style="color:${l};">[${t}]</span> ${d}`,i.style.marginBottom="4px",n.appendChild(i),e.scrollTop=e.scrollHeight;n.children.length>200;)n.removeChild(n.firstChild)}e.appendChild(n),document.getElementById("debug-clear").onclick=()=>n.innerHTML="",document.getElementById("debug-toggle").onclick=()=>{n.style.display="none"===n.style.display?"block":"none"},["log","warn","error","info"].forEach(e=>{let t=console[e];console[e]=function(...n){o(e,n),t.apply(console,n)}}),window.onerror=function(e,t,n,r,i){let a=e;return i&&i.stack?a+="\nStack: "+i.stack:a+=` at ${t}:${n}:${r}`,o("error",[a]),!1},window.addEventListener("error",function(e){o("error",[e],!0)},!0),window.addEventListener("unhandledrejection",function(e){o("error",[e],!0)}),console.info("Debug overlay with native error capture initialized.")}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}();
